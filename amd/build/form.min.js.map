{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/templates', 'core/notification'],\nfunction($, Ajax, Templates, Notification) {\n    return {\n        init: function(courseid) {\n            // Load form data and render template\n            Ajax.call([{\n                methodname: 'local_soccerteam_get_form_data',\n                args: {courseid: courseid},\n                done: function(data) {\n                    // Add courseid to the data\n                    data.courseid = courseid;\n\n                    // Render the form\n                    Templates.render('local_soccerteam/form', data).then(function(html) {\n                        $('#formcontainer').html(html);\n\n                        // Handle form submission\n                        $('#soccerteam-form').on('submit', function(e) {\n                            e.preventDefault();\n\n                            var userid = $('#userid').val();\n                            var position = $('#position').val();\n                            var jerseynumber = $('#jerseynumber').val();\n\n                            // Validate form data\n                            if (!userid || !position || !jerseynumber) {\n                                Notification.alert('', 'Please fill in all required fields');\n                                return;\n                            }\n\n                            // Show loading indicator\n                            $('#status-message')\n                                .removeClass('alert-danger alert-success')\n                                .addClass('alert-info')\n                                .text('Saving data...')\n                                .show();\n\n                            // Save data via AJAX\n                            Ajax.call([{\n                                methodname: 'local_soccerteam_save_player_data',\n                                args: {\n                                    courseid: parseInt(courseid),\n                                    userid: parseInt(userid),\n                                    position: position,\n                                    jerseynumber: parseInt(jerseynumber)\n                                },\n                                done: function(response) {\n                                    // Show success message\n                                    $('#status-message')\n                                        .removeClass('alert-danger alert-info')\n                                        .addClass('alert-success')\n                                        .text(response.message)\n                                        .show();\n\n                                    // Reset form after 2 seconds\n                                    setTimeout(function() {\n                                        $('#soccerteam-form')[0].reset();\n                                        $('#status-message').hide();\n                                    }, 2000);\n                                },\n                                fail: function(error) {\n                                    // Show error message\n                                    $('#status-message')\n                                        .removeClass('alert-success alert-info')\n                                        .addClass('alert-danger')\n                                        .text('Error saving data: ' + error.message)\n                                        .show();\n                                    \n                                    Notification.exception(error);\n                                }\n                            }]);\n                        });\n\n                        // Handle cancel button\n                        $('#cancel-btn').on('click', function() {\n                            $('#soccerteam-form')[0].reset();\n                            $('#status-message').hide();\n                        });\n                    }).fail(function(error) {\n                        Notification.exception(error);\n                    });\n                },\n                fail: function(error) {\n                    Notification.exception(error);\n                }\n            }]);\n        }\n    };\n});\n"],"names":["define","$","Ajax","Templates","Notification","init","courseid","call","methodname","args","done","data","render","then","html","on","e","preventDefault","userid","val","position","jerseynumber","removeClass","addClass","text","show","parseInt","response","message","setTimeout","reset","hide","fail","error","exception","alert"],"mappings":"AAAAA,+BAAO,CAAC,SAAU,YAAa,iBAAkB,sBACjD,SAASC,EAAGC,KAAMC,UAAWC,oBAClB,CACHC,KAAM,SAASC,UAEXJ,KAAKK,KAAK,CAAC,CACPC,WAAY,iCACZC,KAAM,CAACH,SAAUA,UACjBI,KAAM,SAASC,MAEXA,KAAKL,SAAWA,SAGhBH,UAAUS,OAAO,wBAAyBD,MAAME,MAAK,SAASC,MAC1Db,EAAE,kBAAkBa,KAAKA,MAGzBb,EAAE,oBAAoBc,GAAG,UAAU,SAASC,GACxCA,EAAEC,qBAEEC,OAASjB,EAAE,WAAWkB,MACtBC,SAAWnB,EAAE,aAAakB,MAC1BE,aAAepB,EAAE,iBAAiBkB,MAGjCD,QAAWE,UAAaC,cAM7BpB,EAAE,mBACGqB,YAAY,8BACZC,SAAS,cACTC,KAAK,kBACLC,OAGLvB,KAAKK,KAAK,CAAC,CACPC,WAAY,oCACZC,KAAM,CACFH,SAAUoB,SAASpB,UACnBY,OAAQQ,SAASR,QACjBE,SAAUA,SACVC,aAAcK,SAASL,eAE3BX,KAAM,SAASiB,UAEX1B,EAAE,mBACGqB,YAAY,2BACZC,SAAS,iBACTC,KAAKG,SAASC,SACdH,OAGLI,YAAW,WACP5B,EAAE,oBAAoB,GAAG6B,QACzB7B,EAAE,mBAAmB8B,SACtB,MAEPC,KAAM,SAASC,OAEXhC,EAAE,mBACGqB,YAAY,4BACZC,SAAS,gBACTC,KAAK,sBAAwBS,MAAML,SACnCH,OAELrB,aAAa8B,UAAUD,YA1C3B7B,aAAa+B,MAAM,GAAI,yCAgD/BlC,EAAE,eAAec,GAAG,SAAS,WACzBd,EAAE,oBAAoB,GAAG6B,QACzB7B,EAAE,mBAAmB8B,aAE1BC,MAAK,SAASC,OACb7B,aAAa8B,UAAUD,WAG/BD,KAAM,SAASC,OACX7B,aAAa8B,UAAUD"}
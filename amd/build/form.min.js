define("local_soccerteam/form",["jquery","core/ajax","core/templates","core/notification"],(function($,Ajax,Templates,Notification){return{init:function(courseid){const validPositions=["Goalkeeper","Defender","Midfielder","Forward"];Ajax.call([{methodname:"local_soccerteam_get_form_data",args:{courseid:courseid},done:function(data){data.courseid=courseid,Templates.render("local_soccerteam/form",data).then((function(html){$("#formcontainer").html(html),$("#soccerteam-form").on("submit",(function(e){e.preventDefault();var userid=$("#userid").val(),position=$("#position").val(),jerseynumber=$("#jerseynumber").val();userid&&position&&jerseynumber?validPositions.includes(position)?($("#status-message").removeClass("alert-danger alert-success").addClass("alert-info").text("Saving data...").show(),Ajax.call([{methodname:"local_soccerteam_check_jersey_number",args:{courseid:parseInt(courseid),userid:parseInt(userid),jerseynumber:parseInt(jerseynumber)},done:function(response){response.duplicate?$("#status-message").removeClass("alert-success alert-info").addClass("alert-danger").text(response.message).show():function(courseid,userid,position,jerseynumber){Ajax.call([{methodname:"local_soccerteam_save_player_data",args:{courseid:parseInt(courseid),userid:parseInt(userid),position:position,jerseynumber:parseInt(jerseynumber)},done:function(response){$("#status-message").removeClass("alert-danger alert-info").addClass("alert-success").text(response.message).show(),setTimeout((function(){$("#soccerteam-form")[0].reset(),$("#status-message").hide()}),2e3)},fail:function(error){$("#status-message").removeClass("alert-success alert-info").addClass("alert-danger").text("Error saving data: "+error.message).show(),Notification.exception(error)}}])}(courseid,userid,position,jerseynumber)},fail:function(error){$("#status-message").removeClass("alert-success alert-info").addClass("alert-danger").text("Error checking jersey number: "+error.message).show(),Notification.exception(error)}}])):$("#status-message").removeClass("alert-success alert-info").addClass("alert-danger").text("Error: Invalid position selected").show():Notification.alert("","Please fill in all required fields")})),$("#cancel-btn").on("click",(function(){$("#soccerteam-form")[0].reset(),$("#status-message").hide()}))})).fail((function(error){Notification.exception(error)}))},fail:function(error){Notification.exception(error)}}])}}}));

//# sourceMappingURL=form.min.js.map